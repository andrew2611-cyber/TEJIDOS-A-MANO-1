{% extends 'core/dashboard_base.html' %}
{% block dashboard_content %}
<h1 class="mb-4">Entradas y Salidas</h1>
<hr>
<div class="row">
  <div class="col-md-6">
    <div class="mb-4">
      <a href="{% url 'core:entrada_form_admin' %}" class="btn btn-success">
        <i class="fas fa-plus me-2"></i> Nueva Entrada
      </a>
    </div>
    <h3>Entradas</h3>
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Talla</th>
          <th>Color</th>
          <th>Fecha</th>
        </tr>
      </thead>
      <tbody>
        {% for entrada in entradas %}
        <tr>
          <td>{{ entrada.id }}</td>
          <td>{{ entrada.producto }}</td>
          <td>{{ entrada.cantidad }}</td>
          <td>${{ entrada.precio|floatformat:2 }}</td>
          <td>{{ entrada.talla|default:"-" }}</td>
          <td>{{ entrada.color|default:"-" }}</td>
          <td>{{ entrada.fecha|date:"d M Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="7">No hay entradas registradas.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-md-6">
    <h3>Salidas</h3>
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Talla</th>
          <th>Color</th>
          <th>Fecha</th>
          <th>Motivo</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for salida in salidas %}
        <tr>
          <td>{{ salida.id }}</td>
          <td>{{ salida.producto }}</td>
          <td>{{ salida.cantidad }}</td>
          <td>${{ salida.precio|floatformat:2 }}</td>
          <td>{{ salida.talla|default:"-" }}</td>
          <td>{{ salida.color|default:"-" }}</td>
          <td>{{ salida.fecha|date:"d M Y H:i" }}</td>
          <td>{{ salida.motivo|default:"-" }}</td>
          <td>
            <a href="{% url 'core:salida_editar_admin' salida.id %}" class="btn btn-sm btn-warning">Editar Motivo</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="9">No hay salidas registradas.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<div class="mt-4">
  <a href="{% url 'core:entradas_salidas_pdf' %}" class="btn btn-primary" target="_blank">
    <i class="fas fa-file-pdf me-2"></i> Descargar PDF
  </a>
</div>
{% endblock %}
