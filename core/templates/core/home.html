{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<div id="carrusel-fondo-home">
    <img src="{% static 'img/fondo.png' %}" class="fondo-carrusel-home activo" alt="Fondo principal">
    <img src="{% static 'img/fondo1.png' %}" class="fondo-carrusel-home" alt="Fondo alternativo">
</div>

<div id="carrusel-zapatos-home">
    <img src="{% static 'img/fondo4.png' %}" class="zapato-carrusel-home zapato-2d activo" alt="Zapato 2D">
    <img src="{% static 'img/fondo3.png' %}" class="zapato-carrusel-home zapato-3d" alt="Zapato 3D">
</div>
<div id="contenedor-texto-zapatillas">
    <h1 class="texto-zapatillas">ZAPATILLAS</h1>
</div>
<div id="contenedor-texto-cosidas">
    <h2 id="texto-cosidas" class="texto-cosidas texto-derecha">
        TEJIDAS
        
    </h2>
</div>
<div id="contenedor-texto-inspiradas">
    <h3 class="texto-inspiradas texto-inspiradas-mobile">INSPIRADAS EN LAS FAMILIAS</h3>
    <h3 class="texto-agricolas texto-agricolas-mobile">AGRICOLAS</h3>
</div>

<div id="contenedor-texto-agricultores">
    <p class="texto-agricultores">
        Comodidad y estilo, rindiendo homenaje<br>
        Al trabajo de las familias agricultoras.<br>
        Cada par esta elaborado<br>
        Artesanalmente con tejidos resistentes<br>
        Y colores vibrantes que representan la<br>
        Conexión con la tierra y la cultura<br>
        campesina
    </p>
</div>
{# Cuadro animado sincronizado con el texto COSIDAS, fuera del contenedor de cosidas #}
<div id="contenedor-cuadro-animado">
    <div id="cuadro-animado" class="cuadro-animado"></div>
</div>
<!-- Contenedores de tallas -->
<div id="contenedor-tallas-info">
    <div class="tallas-disponible">DISPONIBLE EN VARIAS TALLAS</div>
    <div class="tallas-lista">22&nbsp;&nbsp;24&nbsp;&nbsp;26&nbsp;&nbsp;28&nbsp;&nbsp;36&nbsp;&nbsp;44</div>
</div>
<!-- Contenedor del almanaque simple -->
<div id="almanaque-contenedor">
    <span id="almanaque-icono" aria-label="Calendario">
        <!-- SVG de calendario, estilo simple y moderno -->
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#222" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="5" width="18" height="16" rx="2.5" fill="#fff" stroke="#222"/>
            <path d="M16 3v4M8 3v4M3 9h18" />
            <rect x="7" y="13" width="2" height="2" fill="#222"/>
            <rect x="11" y="13" width="2" height="2" fill="#222"/>
            <rect x="15" y="13" width="2" height="2" fill="#222"/>
        </svg>
    </span>
    <span id="almanaque-texto">
        <span id="almanaque-mes"></span>
        <span id="almanaque-anio"></span>
    </span>
</div>

<!-- Contenedor de imagen 3D estática -->


<!-- Tarjetas en blanco debajo del diseño de los zapatos -->
<div class="categorias-home-container">
  <div class="row categorias-tarjetas-row">
    {% for categoria in categorias %}
      <div class="categoria-tarjeta-col">
        <div class="categoria-tarjeta" style="background: url('{% static 'img/' %}{{ categoria.imagen_fondo }}') center center/cover no-repeat, #fff; position: relative;">
          {% if categoria.imagen_principal %}
            <img src="{{ categoria.imagen_principal.url }}" alt="Producto principal" class="categoria-imagen-principal" />
          {% endif %}
          <div class="categoria-nombre">{{ categoria.nombre }}</div>
          <a href="{% url 'productos:lista_productos' %}" class="btn btn-comprar">Comprar</a>
        </div>
      </div>
    {% empty %}
      <div class="categoria-tarjeta-col">
        <div class="categoria-tarjeta"></div>
      </div>
    {% endfor %}
  </div>
</div>

<div id="contenedor-imagen-3d-estatica">
    <img src="{% static 'img/MOCHILA3D.png' %}" alt="Imagen 3D Estática" class="imagen-3d-estatica">
</div>

{# Bloque de productos favoritos del cliente (máximo 3, carrusel simple) #}
{% with favoritos=request.session.favoritos|default_if_none:"" %}
{% if favoritos and productos_favoritos %}
<div class="favoritos-home-container mt-4">
    <h4 class="mb-3">Tus Favoritos</h4>
    <div class="row row-cols-1 row-cols-md-3 g-3 justify-content-center" id="favoritos-home-row">
        {% for producto in productos_favoritos %}
        <div class="col">
            <div class="card h-100 producto-float position-relative">
                <div class="contenedor-imagen-producto">
                    <img src="{% static 'img/' %}{{ producto.imagen_fondo }}" class="img-fondo-producto" alt="Fondo producto">
                    {% if producto.imagen_principal %}
                    <img src="{{ producto.imagen_principal.url }}" class="img-principal-producto" alt="{{ producto.nombre }}">
                    {% else %}
                    <img src="/static/img/placeholder.png" class="img-principal-producto" alt="Imagen no disponible">
                    {% endif %}
                </div>
                <div class="card-body">
                    <h5 class="card-title mb-1">{{ producto.nombre }}</h5>
<p class="card-text text-muted mb-3">{{ producto.categoria.nombre }}</p>
<a href="{% url 'productos:lista_productos' %}" class="btn btn-sm btn-comprar">Comprar</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endwith %}



{% block extra_js %}
<script src="{% static 'js/cuadro-animado.js' %}"></script>
<script src="{% static 'js/almanaque.js' %}"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  var btn = document.getElementById('boton-toggle-animacion');
  var animables = [
    document.querySelector('.texto-zapatillas'),
    document.querySelector('.texto-cosidas'),
    document.querySelector('.texto-inspiradas'),
    document.querySelector('.texto-agricolas'),
    document.getElementById('contenedor-texto-agricultores'),
    document.getElementById('contenedor-cuadro-animado'),
    document.querySelector('.tallas-disponible'),
    document.querySelector('.tallas-lista'),
    document.getElementById('almanaque-contenedor')
  ];
  var oculto = false;
  btn.addEventListener('click', function () {
    oculto = !oculto;
    animables.forEach(function(el) {
      if (el) {
        if (oculto) {
          el.classList.add('oculto');
          el.classList.remove('visible');
        } else {
          el.classList.remove('oculto');
          el.classList.add('visible');
        }
      }
    });
    btn.textContent = oculto ? 'Mostrar diseño' : 'Ocultar diseño';
  });
  // Estado inicial: visible
  animables.forEach(function(el) {
    if (el) {
      el.classList.add('animable-home', 'visible');
    }
  });
});
</script>
{% endblock extra_js %}

{% endblock content %}



